<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">
        <img src="/images/logo.png" alt="{{ site.title }} Logo" class="brand-logo">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
            {%- assign lang = page.lang | default: 'en' -%}
            {%- for item in site.data.nav -%}
            {%- assign label_key = 'label_' | append: lang -%}
            {%- assign href_key = 'href_' | append: lang -%}
            {%- assign item_href = item[href_key] | default: item.href -%}
            <li class="nav-item">
                <a class="nav-link{% if page.nav_active == item.id %} active{% endif %}" href="{{ item_href }}">{{ item[label_key] }}</a>
            </li>
            {%- endfor -%}
            
            <!-- Language Switcher -->
            <li class="nav-item dropdown">
            <button class="nav-link dropdown-toggle btn btn-link" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false" onKeyDown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.click();}" aria-label="Language selector">
                {% if page.lang == 'de' -%}
                <i class="fas fa-globe"></i> DE
                {%- else -%}
                <i class="fas fa-globe"></i> EN
                {%- endif %}
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                {%- if page.lang == 'de' -%}
                <li>
                    <a class="dropdown-item" href="{% if page.nav_active == 'cv' %}/cv/{% else %}/{% endif %}">
                    <i class="fas fa-flag-usa"></i> English
                    </a>
                </li>
                <li>
                    <a class="dropdown-item active" href="{% if page.nav_active == 'cv' %}/cv/de{% else %}/de{% endif %}">
                    <i class="fas fa-flag"></i> Deutsch
                    </a>
                </li>
                {%- else -%}
                <li>
                    <a class="dropdown-item active" href="{% if page.nav_active == 'cv' %}/cv/{% else %}/{% endif %}">
                    <i class="fas fa-flag-usa"></i> English
                    </a>
                </li>
                <li>
                    <a class="dropdown-item" href="{% if page.nav_active == 'cv' %}/cv/de{% else %}/de{% endif %}">
                    <i class="fas fa-flag"></i> Deutsch
                    </a>
                </li>
                {%- endif -%}
            </ul>
            </li>
        </ul>
        </div>
    </div>
</nav>
